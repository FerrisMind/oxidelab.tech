# Vercel Speed Insights Setup Guide

This document describes how Vercel Speed Insights has been set up and integrated into the Oxide Lab landing page project.

## Overview

Vercel Speed Insights is a lightweight performance monitoring tool that measures Core Web Vitals and other key performance metrics in production. This project has been configured to automatically track performance data when deployed to Vercel.

## Prerequisites Met

- ✅ **Vercel Account**: Required for deployment and dashboard access
- ✅ **Vercel Project**: Created and configured for this repository
- ✅ **Vercel CLI**: Can be installed for local testing

## Installation

### Package Setup

The `@vercel/speed-insights` package has been added to the project dependencies:

```bash
npm install @vercel/speed-insights
```

Current installed version: `^1.3.1`

You can verify this in `package.json`:

```json
{
  "dependencies": {
    "@vercel/speed-insights": "^1.3.1"
  }
}
```

## Implementation

### Current Framework

This project uses **Svelte 5** with **Vite** as the build tool. This falls under the "other" framework category in the Speed Insights documentation.

### Integration Method

For projects that fall under the "other" framework category, the `injectSpeedInsights()` function is called to add the tracking script to the application.

**File:** `src/main.ts`

```typescript
import { mount } from 'svelte'
import { injectSpeedInsights } from '@vercel/speed-insights'
import './app.css'
import App from './App.svelte'

injectSpeedInsights();

const app = mount(App, {
  target: document.getElementById('app')!,
})

export default app
```

**Key Implementation Details:**

1. **Early Injection**: The `injectSpeedInsights()` function is called at the very beginning of the application initialization, ensuring the tracking script is injected before the main app mounts.
2. **Client-Side Only**: This approach works entirely on the client side, which is appropriate for a static Svelte application built with Vite.
3. **Minimal Overhead**: The injection adds minimal performance overhead and doesn't block application loading.

## How It Works

When deployed to Vercel:

1. The `injectSpeedInsights()` function adds the Speed Insights tracking script to the page
2. The script (`/_vercel/speed-insights/script.js`) is automatically generated by Vercel after deployment
3. The script measures Core Web Vitals:
   - **Largest Contentful Paint (LCP)**: Measures loading performance
   - **Cumulative Layout Shift (CLS)**: Measures visual stability
   - **First Input Delay (FID)** / **Interaction to Next Paint (INP)**: Measures interactivity
4. Additional metrics are collected and sent to the Vercel dashboard
5. Data appears in the Speed Insights dashboard after users visit the site

## Enabling Speed Insights in Vercel Dashboard

To enable Speed Insights for this project:

1. Go to the [Vercel Dashboard](https://vercel.com/dashboard)
2. Select your project: **oxidelab.tech**
3. Navigate to the **Speed Insights** tab
4. Click **Enable**

> **Note:** Enabling Speed Insights will add new routes scoped at `/_vercel/speed-insights/*` after your next deployment.

## Deployment

Deploy the application to Vercel using:

```bash
vercel deploy
```

Or, if you've connected this repository's git branch to Vercel:

```bash
git push origin main
```

Vercel will automatically deploy on push to the main branch.

After deployment, the Speed Insights tracking will become active.

## Viewing Data

Once your app is deployed and users have visited your site, you can view performance metrics:

1. Go to your [Vercel Dashboard](https://vercel.com/dashboard)
2. Select your project
3. Click the **Speed Insights** tab
4. After a few days of visitor traffic, you'll be able to explore metrics

## Privacy and Compliance

Vercel Speed Insights is designed with privacy in mind:

- **No third-party tracking**: Data is sent directly to Vercel infrastructure
- **Data retention**: Performance data is retained according to Vercel's data policies
- **GDPR compliant**: Vercel Speed Insights complies with GDPR and other privacy standards

For more information, see [Vercel Speed Insights Privacy Policy](https://vercel.com/docs/speed-insights/privacy-policy).

## Customization Options

The `@vercel/speed-insights` package provides additional configuration options:

### Environment Variables

You can configure Speed Insights behavior via environment variables:

- `NEXT_PUBLIC_VERCEL_ANALYTICS_ID`: Custom analytics ID (if needed for specific setup)

### Runtime Configuration

For more advanced use cases, you can control when and how Speed Insights data is sent. See the [Speed Insights Package Documentation](https://vercel.com/docs/speed-insights/package) for advanced options.

## Troubleshooting

### Speed Insights Script Not Loading

**Symptom:** `/_vercel/speed-insights/script.js` returns 404

**Solution:**
1. Ensure Speed Insights is enabled in the Vercel dashboard
2. Re-deploy your project after enabling
3. Wait 2-5 minutes for Vercel infrastructure to register the changes

### No Data in Dashboard

**Possible Causes:**
- Speed Insights not yet enabled in Vercel dashboard
- Application not yet deployed after enabling
- Insufficient visitor traffic (need users to visit the site)
- Cache issues in browser

**Solutions:**
1. Verify Speed Insights is enabled in dashboard
2. Re-deploy the project
3. Clear browser cache and visit the site
4. Wait 24-48 hours for data to aggregate

### Performance Impact

The Speed Insights script is designed to have minimal performance impact:

- Non-blocking injection
- Asynchronous data transmission
- Deferred script loading
- Less than 5KB additional payload

## References

- [Vercel Speed Insights Documentation](https://vercel.com/docs/speed-insights)
- [Speed Insights Package Reference](https://vercel.com/docs/speed-insights/package)
- [Web Vitals Metrics](https://vercel.com/docs/speed-insights/metrics)
- [Privacy and Compliance](https://vercel.com/docs/speed-insights/privacy-policy)

## Next Steps

After Speed Insights is set up and collecting data:

1. **Monitor Core Web Vitals**: Track LCP, CLS, and INP metrics
2. **Optimize Performance**: Use insights to identify and fix performance bottlenecks
3. **Set Performance Budgets**: Establish performance targets for your application
4. **Regular Reviews**: Check Speed Insights dashboard weekly to track performance trends

---

**Status:** ✅ Speed Insights is ready to track performance once deployed to Vercel.

Last updated: January 2026
